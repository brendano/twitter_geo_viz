<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8">
    <title>Albers Projection</title>
    <script type="text/javascript" src="d3.js"></script>
    <script type="text/javascript" src="d3.geo.js"></script>
    <script type="text/javascript" src="lib/jquery/jquery.min.js"></script>
    <script type="text/javascript" src="lib/jquery-ui/jquery-ui.min.js"></script>
    <script type="text/javascript" src="us_states.js"></script>
    <style type="text/css">

@import url("lib/jquery-ui/jquery-ui.css");

body {
  font: 14px Helvetica Neue;
}

svg {
  width: 960px;
  height: 500px;
  border: solid 1px #ccc;
  background: #f0f0f0;
}

.states path {
  fill: #ccc;
  stroke: #fff;
}

.symbols circle {
  fill: none;
  stroke: steelblue;
}

div {
  width: 960px;
}

    </style>
  </head>
  <body>
    <h3>Twitter Words</h3>
    <script type="text/javascript">

// Our projection.
var xy = d3.geo.albers(),
    path = d3.geo.path().projection(xy);

var svg = d3.select("body")
  .append("svg:svg");
  
var states = svg.append("svg:g")
  .attr('class', 'states');

var symbols = svg.append("svg:g")
  .attr('class', 'symbols');

function render_geo(collection) {
  states.selectAll("path")
      .data(us_states.features)
    .enter().append("svg:path")
      .attr("d", path);
}

render_geo(us_states);

var userlocs = [[26734, [36.94397913281248, -76.315979109375078]], [9016, [33.49582000000008, -112.07163900000046]], [63317, [42.656560000000006, -70.609065000000029]], [23944, [42.753361999999981, -84.452758000000102]], [1322, [35.888141999999817, -78.546501000000376]], [26262, [33.431575999999978, -111.94274899999998]], [72702, [35.928257000000016, -78.93501999999998]], [2952, [40.671604242339988, -73.928469431755303]], [15802, [42.154733999999841, -71.2733130000003]], [63415, [44.166298000000047, -88.463165000000089]], [12079, [42.976813557256726, -81.243986435929159]], [12594, [41.519999999999989, -87.47999999999989]], [1061, [42.989617999999801, -85.826395000000034]], [272, [34.981918036269491, -78.911590735751275]], [9600, [38.997193999999993, -77.026560999999916]], [47827, [42.076869999999992, -87.924751000000001]], [66562, [49.922427178571411, -97.123132285714277]], [13350, [40.789470259259296, -73.342111691357772]], [21374, [33.643105265306133, -111.92369277551025]], [46514, [44.947663333333338, -93.261098444444443]], [28142, [44.653763000000019, -63.630415000000042]], [2228, [42.643780999999947, -71.305701999999798]], [2016, [29.911560136363711, -95.556119164502405]], [42807, [41.501460890410968, -81.643135986301431]], [62660, [35.446393999999998, -80.535264961538445]], [23647, [35.749097539682552, -78.613244087301595]], [51034, [38.069836000000002, -84.475554000000059]], [53370, [33.256908999999986, -87.511490000000052]], [1327, [41.590366299999943, -87.118319012499768]], [53075, [37.116012999999988, -87.919785000000033]]];

userlocs.forEach(function(d) {
  d[1] = d[1].reverse();
})

plot_userlocs(userlocs);

function plot_userlocs(userlocs) {
  var sel = symbols.selectAll('circle').data(userlocs);
  
  function transformer(d) {
    return "translate(" + xy(d[1]).join(",") + ")";
  }
  
  sel.enter().append("svg:circle")
    .attr("r", 5)
    .attr("transform", transformer);
    
  sel.attr("transform", transformer);
  
  sel.exit().remove();
}
    </script>
  </body>
</html>








